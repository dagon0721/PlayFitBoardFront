{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import\"./style.css\";import{useBoardStore,useLoginUserStore}from\"stores\";import{useNavigate}from\"react-router-dom\";import{MAIN_PATH}from\"constant\";import{useCookies}from\"react-cookie\";// component: 게시물 작성 화면 컴포넌트 //\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BoardWrite(){// state: 제목 영역 요소 참조 상태 //\nconst titleRef=useRef(null);// state: 본문 영역 요소 참조 상태 //\nconst contentRef=useRef(null);// state: 이미지 입력 요소 참조 상태 //\nconst imageInputRef=useRef(null);// state: 게시물 상태 //\nconst{title,setTitle}=useBoardStore();const{content,setContent}=useBoardStore();const{boardImageFileList,setBoardImageFileList}=useBoardStore();const{resetBoard}=useBoardStore();// state: 로그인 유저 상태 //\nconst{loginUser}=useLoginUserStore();// state: 쿠키 상태 //\nconst[cookies,setCookies]=useCookies();// state: 게시물 이미지 미리보기 URL 상태 //\nconst[imageUrls,setImageUrls]=useState([]);// function: 네비게이트 함수 //\nconst navigator=useNavigate();// event handler: 제목 변경 이벤트 처리 //\nconst onTitleChangeHandler=event=>{const{value}=event.target;setTitle(value);if(!titleRef.current)return;titleRef.current.style.height=\"auto\";titleRef.current.style.height=`${titleRef.current.scrollHeight}px`;};// event handler: 내용 변경 이벤트 처리 //\nconst onContentChangeHandler=event=>{const{value}=event.target;setContent(value);if(!contentRef.current)return;contentRef.current.style.height=\"auto\";contentRef.current.style.height=`${contentRef.current.scrollHeight}px`;};// event handler: 이미지 변경 이벤트 처리 //\nconst onImageChangeHandler=event=>{if(!event.target.files||!event.target.files.length)return;const file=event.target.files[0];const imageUrl=URL.createObjectURL(file);const newImageUrls=imageUrls.map(item=>item);newImageUrls.push(imageUrl);setImageUrls(newImageUrls);const newBoardImageFileList=boardImageFileList.map(item=>item);newBoardImageFileList.push(file);setBoardImageFileList(newBoardImageFileList);if(!imageInputRef.current)return;imageInputRef.current.value=\"\";};// event handler: 이미지 업로드 버튼 클릭 이벤트 처리 //\nconst onImageUploadButtonClickHandler=()=>{if(!imageInputRef.current)return;imageInputRef.current.click();};// event handler: 이미지 닫기 버튼 클릭 이벤트 처리 //\nconst onImageCloseButtonClickHandler=deleteIndex=>{if(!imageInputRef.current)return;imageInputRef.current.value=\"\";const newImageUrls=imageUrls.filter((url,index)=>index!==deleteIndex);setImageUrls(newImageUrls);const newBoardImageFileList=boardImageFileList.filter((file,index)=>index!==deleteIndex);setBoardImageFileList(newBoardImageFileList);};// effect: 마운트 시 실행할 함수 //\nuseEffect(()=>{const accessToken=cookies.accessToken;if(!accessToken){navigator(MAIN_PATH());return;}resetBoard();},[]);// render: 게시물 작성 화면 컴포넌트 렌더링 //\nreturn/*#__PURE__*/_jsx(\"div\",{id:\"board-write-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"board-write-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"board-write-title-box\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:titleRef,className:\"board-write-title-textarea\",rows:1,placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\",value:title,onChange:onTitleChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-content-box\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:contentRef,className:\"board-write-content-textarea\",placeholder:\"\\uBCF8\\uBB38\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\",value:content,onChange:onContentChangeHandler}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-button\",onClick:onImageUploadButtonClickHandler,children:/*#__PURE__*/_jsx(\"div\",{className:\"icon image-box-light-icon\"})}),/*#__PURE__*/_jsx(\"input\",{ref:imageInputRef,type:\"file\",accept:\"image/*\",style:{display:\"none\"},onChange:onImageChangeHandler})]}),/*#__PURE__*/_jsx(\"div\",{className:\"board-write-images-box\",children:imageUrls.map((imageUrl,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-image-box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"board-write-image\",src:imageUrl,alt:\"\\uC774\\uBBF8\\uC9C0 \\uCCA8\\uBD80\"}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-button image-close\",onClick:()=>onImageCloseButtonClickHandler(index),children:/*#__PURE__*/_jsx(\"div\",{className:\"icon close-icon\"})})]}))})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useBoardStore","useLoginUserStore","useNavigate","MAIN_PATH","useCookies","jsx","_jsx","jsxs","_jsxs","BoardWrite","titleRef","contentRef","imageInputRef","title","setTitle","content","setContent","boardImageFileList","setBoardImageFileList","resetBoard","loginUser","cookies","setCookies","imageUrls","setImageUrls","navigator","onTitleChangeHandler","event","value","target","current","style","height","scrollHeight","onContentChangeHandler","onImageChangeHandler","files","length","file","imageUrl","URL","createObjectURL","newImageUrls","map","item","push","newBoardImageFileList","onImageUploadButtonClickHandler","click","onImageCloseButtonClickHandler","deleteIndex","filter","url","index","accessToken","id","children","className","ref","rows","placeholder","onChange","onClick","type","accept","display","src","alt"],"sources":["C:/Springboot-React-ts/board-front/src/views/Board/Write/index.tsx"],"sourcesContent":["import React, { ChangeEvent, useEffect, useRef, useState } from \"react\";\r\nimport \"./style.css\";\r\nimport { useBoardStore, useLoginUserStore } from \"stores\";\r\nimport authBackground from \"assets/image/auth-bg/auth-background5.png\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { MAIN_PATH } from \"constant\";\r\nimport { useCookies } from \"react-cookie\";\r\n\r\n// component: 게시물 작성 화면 컴포넌트 //\r\nexport default function BoardWrite() {\r\n  // state: 제목 영역 요소 참조 상태 //\r\n  const titleRef = useRef<HTMLTextAreaElement | null>(null);\r\n  // state: 본문 영역 요소 참조 상태 //\r\n  const contentRef = useRef<HTMLTextAreaElement | null>(null);\r\n  // state: 이미지 입력 요소 참조 상태 //\r\n  const imageInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  // state: 게시물 상태 //\r\n  const { title, setTitle } = useBoardStore();\r\n  const { content, setContent } = useBoardStore();\r\n  const { boardImageFileList, setBoardImageFileList } = useBoardStore();\r\n  const { resetBoard } = useBoardStore();\r\n\r\n  // state: 로그인 유저 상태 //\r\n  const { loginUser } = useLoginUserStore();\r\n\r\n  // state: 쿠키 상태 //\r\n  const [cookies, setCookies] = useCookies();\r\n\r\n  // state: 게시물 이미지 미리보기 URL 상태 //\r\n  const [imageUrls, setImageUrls] = useState<string[]>([]);\r\n\r\n  // function: 네비게이트 함수 //\r\n  const navigator = useNavigate();\r\n\r\n  // event handler: 제목 변경 이벤트 처리 //\r\n  const onTitleChangeHandler = (event: ChangeEvent<HTMLTextAreaElement>) => {\r\n    const { value } = event.target;\r\n    setTitle(value);\r\n\r\n    if (!titleRef.current) return;\r\n    titleRef.current.style.height = \"auto\";\r\n    titleRef.current.style.height = `${titleRef.current.scrollHeight}px`;\r\n  };\r\n\r\n  // event handler: 내용 변경 이벤트 처리 //\r\n  const onContentChangeHandler = (event: ChangeEvent<HTMLTextAreaElement>) => {\r\n    const { value } = event.target;\r\n    setContent(value);\r\n\r\n    if (!contentRef.current) return;\r\n    contentRef.current.style.height = \"auto\";\r\n    contentRef.current.style.height = `${contentRef.current.scrollHeight}px`;\r\n  };\r\n\r\n  // event handler: 이미지 변경 이벤트 처리 //\r\n  const onImageChangeHandler = (event: ChangeEvent<HTMLInputElement>) => {\r\n    if (!event.target.files || !event.target.files.length) return;\r\n    const file = event.target.files[0];\r\n    const imageUrl = URL.createObjectURL(file);\r\n    const newImageUrls = imageUrls.map((item) => item);\r\n    newImageUrls.push(imageUrl);\r\n    setImageUrls(newImageUrls);\r\n\r\n    const newBoardImageFileList = boardImageFileList.map((item) => item);\r\n    newBoardImageFileList.push(file);\r\n    setBoardImageFileList(newBoardImageFileList);\r\n\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.value = \"\";\r\n  };\r\n\r\n  // event handler: 이미지 업로드 버튼 클릭 이벤트 처리 //\r\n  const onImageUploadButtonClickHandler = () => {\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.click();\r\n  };\r\n  // event handler: 이미지 닫기 버튼 클릭 이벤트 처리 //\r\n  const onImageCloseButtonClickHandler = (deleteIndex: number) => {\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.value = \"\";\r\n\r\n    const newImageUrls = imageUrls.filter(\r\n      (url, index) => index !== deleteIndex\r\n    );\r\n    setImageUrls(newImageUrls);\r\n\r\n    const newBoardImageFileList = boardImageFileList.filter(\r\n      (file, index) => index !== deleteIndex\r\n    );\r\n    setBoardImageFileList(newBoardImageFileList);\r\n  };\r\n\r\n  // effect: 마운트 시 실행할 함수 //\r\n  useEffect(() => {\r\n    const accessToken = cookies.accessToken;\r\n    if (!accessToken) {\r\n      navigator(MAIN_PATH());\r\n      return;\r\n    }\r\n    resetBoard();\r\n  }, []);\r\n\r\n  // render: 게시물 작성 화면 컴포넌트 렌더링 //\r\n  return (\r\n    <div id=\"board-write-wrapper\">\r\n      <div className=\"board-write-container\">\r\n        <div className=\"board-write-box\">\r\n          <div className=\"board-write-title-box\">\r\n            <textarea\r\n              ref={titleRef}\r\n              className=\"board-write-title-textarea\"\r\n              rows={1}\r\n              placeholder=\"제목을 작성해주세요.\"\r\n              value={title}\r\n              onChange={onTitleChangeHandler}\r\n            />\r\n          </div>\r\n          <div className=\"divider\"></div>\r\n          <div className=\"board-write-content-box\">\r\n            <textarea\r\n              ref={contentRef}\r\n              className=\"board-write-content-textarea\"\r\n              placeholder=\"본문을 작성해주세요.\"\r\n              value={content}\r\n              onChange={onContentChangeHandler}\r\n            />\r\n            <div\r\n              className=\"icon-button\"\r\n              onClick={onImageUploadButtonClickHandler}\r\n            >\r\n              <div className=\"icon image-box-light-icon\"></div>\r\n            </div>\r\n            <input\r\n              ref={imageInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              style={{ display: \"none\" }}\r\n              onChange={onImageChangeHandler}\r\n            />\r\n          </div>\r\n          <div className=\"board-write-images-box\">\r\n            {imageUrls.map((imageUrl, index) => (\r\n              <div className=\"board-write-image-box\">\r\n                <img\r\n                  className=\"board-write-image\"\r\n                  src={imageUrl}\r\n                  alt=\"이미지 첨부\"\r\n                />\r\n                <div\r\n                  className=\"icon-button image-close\"\r\n                  onClick={() => onImageCloseButtonClickHandler(index)}\r\n                >\r\n                  <div className=\"icon close-icon\"></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}